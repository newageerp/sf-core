import React, { Fragment } from "react";

import TemplateLoader from "../v3/templates/TemplateLoader";
import { Popup } from "@newageerp/ui.popups.base.popup";
import { NaePopupProvider } from "../v3/old-ui/OldPopupProvider";
import { MvcEditModalContentProps, MvcViewModalContentProps } from "../v3/old-ui/OldNaeWindowProvider";

interface PopupProps {
  onClose: () => void;
  editProps: MvcEditModalContentProps;
  setViewProps?: (v: MvcViewModalContentProps) => void;
}

export const editPopupBySchemaAndType = (
  schema: string,
  type: string,
  props: PopupProps
) => {
  const { editProps } = props;

  return (
    <NaePopupProvider isPopup={true} onClose={props.onClose}>
      <Popup onClose={props.onClose}>
        <TemplateLoader
          key={`${editProps.schema}-${editProps.type}-${editProps.id}`}
          templateName="PageMainEdit"
          data={editProps}
          templateData={
            {
            onBack: props.onClose,
            onSaveCallback: editProps.onSaveCallback,
          }
          }
        />
      </Popup>
    </NaePopupProvider>
  );
};
